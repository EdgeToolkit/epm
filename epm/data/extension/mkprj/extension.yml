name: mkprj
version: 0.1
description: |
  Generate C/C++ project for epm project
kind: template
#entry: main.py
argument:
  type:
    type: str
    enum: [lib, app]
    help: project of type <lib> for library, 'app' for executable application.
      
  name:
    type: str
    default: "{{WD | basename}}"
    help: name of the epm project
    
  version:
    type: str
    default: '0.0.1'
    help: version name of the epm project

  out:
    type: str
    default: "{{WD}}"
    help: output directory  of the epm project to be generated.

template:
- CMakeLists.txt
- conanfile.py
- package.yml

- src: include/lib{{name}}.h
  if: argument.type == lib

- src: source/lib{{name}}.c
  if: argument.type == lib

- src: test_package/test_package.c
  if: argument.type == lib
  
- src: test_package/CMakeLists.txt
  if: argument.type == lib

- src: test_package/conanfile.py
  if: argument.type == lib

- src: test_package/main.c
  if: argument.type == app

- test_package/unittest
